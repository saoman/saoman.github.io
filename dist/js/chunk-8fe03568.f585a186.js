(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fe03568"],{"20d6":function(t,e,n){"use strict";var i=n("5ca1"),o=n("0a49")(6),a="findIndex",c=!0;a in[]&&Array(1)[a](function(){c=!1}),i(i.P+i.F*c,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"3acb":function(t,e,n){"use strict";n("20d6"),n("f751"),n("e17f");var i=n("2241"),o=(n("aef6"),n("a481"),n("e7e5"),n("d399")),a=n("2b0e"),c=n("4db0"),r=n("d225"),m=n("b0b4"),s=n("c7a1"),l=n("db49"),d=n("7734"),u=n("5f9c"),p=u["a"].esZmtH5,f=function(t){t.globalUid=p.globalUid,t.dataSrc="H5",t.registerTime=p.registerTime,t.access_token=p.access_token,t.simt_token=p.access_token,t.userId=p.userId||"1"},g=function(){function t(){Object(r["a"])(this,t)}return Object(m["a"])(t,[{key:"getCommunityInfo",value:function(t){f(t);var e=l["h"]+"cmt/api/community/getCommunityInfo";return Object(s["a"])(e,t)}},{key:"getCommunityDynamicNoteList",value:function(t){f(t);var e=l["h"]+"cmt/api/noteEntity/getCommunityDynamicNoteList";return Object(s["a"])(e,t)}},{key:"getCommunityGoodNoteList",value:function(t){f(t);var e=l["h"]+"cmt/api/noteEntity/getCommunityGoodNoteList";return Object(s["a"])(e,t)}},{key:"getCommunityTopicList",value:function(t){f(t);var e=l["h"]+"cmt/api/noteEntity/getCommunityTopicNoteList";return Object(s["a"])(e,t)}},{key:"getHotTopicList",value:function(t){f(t);var e=l["h"]+"cmt/api/topicInfo/queryHotTopic";return Object(s["a"])(e,t)}},{key:"getAnswerList",value:function(t){f(t);var e=l["h"]+"cmt/api/answer/list";return Object(s["a"])(e,t)}},{key:"getNoteInfo",value:function(t){f(t);var e=Object(d["a"])("v_");e&&(t.v_=e);var n=l["h"]+"cmt/api/noteEntity/getNoteDetailInfo";return Object(s["a"])(n,t)}},{key:"getQuestionInfo",value:function(t){f(t);var e=l["h"]+"cmt/api/question/info";return Object(s["a"])(e,t)}},{key:"getAnswerInfo",value:function(t){f(t);var e=Object(d["a"])("v_");e&&(t.v_=e);var n=l["h"]+"cmt/api/answer/info";return Object(s["a"])(n,t)}},{key:"getNoteCommentList",value:function(t){f(t);var e=l["h"]+"ctt/api/comment/select/note/comment/list";return Object(s["c"])(e,t)}},{key:"getNoteCommentHotList",value:function(t){f(t);var e=l["h"]+"ctt/api/comment/select/note/comment/hot/list";return Object(s["c"])(e,t)}},{key:"getTopicInfo",value:function(t){f(t);var e=l["h"]+"cmt/api/topicInfo/getTopicInfo/pbcdhe";return Object(s["a"])(e,t)}},{key:"getTopicNewNoteList",value:function(t){f(t);var e=l["h"]+"cmt/api/topicInfo/queryTopicNewNoteInfo/pbcdhe";return Object(s["a"])(e,t)}},{key:"getTopicHotNoteList",value:function(t){f(t);var e=l["h"]+"cmt/api/topicInfo/queryTopicHotNoteInfo/pbcdhe";return Object(s["a"])(e,t)}},{key:"saveComment",value:function(t){f(t);var e=l["h"]+"cmt/api/noteEntity/saveComment";return Object(s["c"])(e,t)}},{key:"setCommentLike",value:function(t){f(t);var e=l["h"]+"ctt/api/comment/add/comment/like";return Object(s["c"])(e,t)}},{key:"setNoteLike",value:function(t){f(t);var e=l["h"]+"cmt/api/noteEntity/setNoteLike";return Object(s["c"])(e,t)}},{key:"getCommentInfo",value:function(t){f(t);var e=l["h"]+"ctt/api/comment/select/note/comment/info";return Object(s["a"])(e,t)}},{key:"getCommentRelayList",value:function(t){var e=l["h"]+"ctt/api/comment/select/note/comment/reply/list";return Object(s["c"])(e,t)}}]),t}(),h=new g;n.d(e,"b",function(){return b}),n.d(e,"a",function(){return C}),n.d(e,"c",function(){return T});var v=u["a"].esZmtH5,I=function(t){},b=a["default"].observable({replyShow:!1,wxShareShow:!1,get appUserid(){var t=v.userId;return t||"1"},circleId:1,circleInfo:{},circleHotNotes:{},circleGoodNotes:{},hotTopics:{},circleTopics:{},circleAnswers:{},cHotPage:{loading:!1,finished:!1,page:1,total:1,limit:5},cGoodPage:{loading:!1,finished:!1,page:1,total:1,limit:5},cTopicPage:{loading:!1,finished:!1,page:1,total:1,limit:10},cAnswerPage:{loading:!1,finished:!1,page:1,total:1,limit:5},topicName:"",topicId:"",topicInfo:{},topicNewNotes:{},topicHotNotes:{},topicNewPage:{loading:!1,finished:!1,page:1,total:1,limit:5},topicHotPage:{loading:!1,finished:!1,page:1,total:1,limit:5},noteId:1,noteInfo:{},noteComments:{},notePage:{loading:!1,finished:!1,page:1,total:1,limit:5,createTime:0},answerId:0,answerInfo:{},answerPage:{loading:!1,finished:!1,page:1,total:1,limit:5,createTime:0},questionId:0,questionInfo:{},questionPage:{loading:!1,finished:!1,page:1,total:1,limit:5,createTime:0},comment:{id:"",replyUserId:"",commentUserId:"",comment:"",commentType:"",commentId:"",commentPid:"",appUserid:"",globalUid:"",dataSrc:"",registerTime:""},commentNickName:""});function y(){b.noteInfo={},b.noteComments={},b.notePage={loading:!1,finished:!1,page:1,total:1,limit:5,createTime:0}}function w(){b.qusetionInfo={},b.noteComments={},b.notePage={loading:!1,finished:!1,page:1,total:1,limit:5,createTime:0}}function N(){b.answerInfo={},b.noteComments={},b.notePage={loading:!1,finished:!1,page:1,total:1,limit:5,createTime:0}}var C={toggelReply:function(t){b.replyShow=void 0!=t?t:!b.replyShow},wxShareShow:function(){b.wxShareShow=!0},wxShareHide:function(){b.wxShareShow=!1},initCircle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;b.circleId=t,t||Object(o["a"])("无效的圈子id"),h.getCommunityInfo({id:t,appUserid:b.appUserid}).then(function(t){200==t.code&&(b.circleInfo=t.data.result)}),h.getHotTopicList({communityId:t,appUserid:b.appUserid}).then(function(t){b.hotTopics=t.data.result})},loadCircleGoodNotes:function(){var t=b.cGoodPage,e={communityId:b.circleId,page:t.page,limit:t.limit,appUserid:b.appUserid};h.getCommunityGoodNoteList(e).then(function(e){e.data.page<=1?b.circleGoodNotes=e.data.result:b.circleGoodNotes=b.circleGoodNotes.concat(e.data.result),t.page=e.data.page+1,t.total=e.data.total,t.loading=!1,e.data.page>=e.data.total/e.data.limit&&(t.finished=!0)})},loadCircleHotNotes:function(){var t=b.cHotPage,e={communityId:b.circleId,page:t.page,limit:t.limit,appUserid:b.appUserid};h.getCommunityDynamicNoteList(e).then(function(e){e.data.page<=1?b.circleHotNotes=e.data.result:b.circleHotNotes=b.circleHotNotes.concat(e.data.result),t.page=e.data.page+1,t.total=e.data.total,t.loading=!1,e.data.page>=e.data.total/e.data.limit&&(t.finished=!0)})},loadCircleTopics:function(){var t=b.cTopicPage,e={communityId:b.circleId,page:t.page,limit:t.limit,appUserid:b.appUserid};h.getCommunityTopicList(e).then(function(e){e.data.page<=1?b.circleTopics=e.data.result:b.circleTopics=b.circleTopics.concat(e.data.result),t.page=e.data.page+1,t.total=e.data.total,t.loading=!1,e.data.page>=e.data.total/e.data.limit&&(t.finished=!0)})},loadCircleAnswers:function(){var t=b.cAnswerPage,e={noteId:b.questionId,page:t.page,limit:t.limit,userId:b.appUserid};h.getAnswerList(e).then(function(e){if(0!=e.tag)return t.loading=!1,void(t.finished=!0);e.data.page<=1?b.circleAnswers=e.data.result:b.circleAnswers=b.circleAnswers.concat(e.data.result),t.page=e.data.page+1,t.total=e.data.total,t.loading=!1,e.data.page>=e.data.total/e.data.limit&&(t.finished=!0)})},initTopic:function(t,e){var n={};if(t.topicName)n.topicName=t.topicName;else{if(!t.topicId)return void Object(o["a"])("无效的话题");n.topicId=parseInt(t.topicId)}h.getTopicInfo(n).then(function(t){0==t.tag?(b.topicInfo=t.data.result,b.topicId=t.data.result.topicId,b.topicName=t.data.result.topicName.replace(/#/g,"")):e&&e(t)})},loadTopicHotNotes:function(){var t=b.topicHotPage,e={topicName:b.topicName,page:t.page,limit:t.limit,appUserid:b.appUserid};h.getTopicHotNoteList(e).then(function(e){e.data.page<=1?b.topicHotNotes=e.data.result:b.topicHotNotes=b.topicHotNotes.concat(e.data.result),t.page=e.data.page+1,t.total=e.data.total,t.loading=!1,e.data.page>=e.data.total/e.data.limit&&(t.finished=!0)})},loadTopicNewNotes:function(){var t=b.topicNewPage,e={topicName:b.topicName,page:t.page,limit:t.limit,appUserid:b.appUserid};h.getTopicNewNoteList(e).then(function(e){e.data.page<=1?b.topicNewNotes=e.data.result:b.topicNewNotes=b.topicNewNotes.concat(e.data.result),t.page=e.data.page+1,t.total=e.data.total,t.loading=!1,e.data.page>=e.data.total/e.data.limit&&(t.finished=!0)})},initNote:function(t,e,n){var i=this;y(),b.noteId=t,t||Object(o["a"])("无效的帖子id"),h.getNoteInfo({id:t,appUserid:b.appUserid,is_wv:n?1:0}).then(function(t){if(0==t.tag){var n=t.data.result;n.content=i.removeBr(n.content),i.addIsArticle(n),n.isDelete||n.isHide?e&&e(n):b.noteInfo=n}else e&&e(t)})},addIsArticle:function(t){if(-1==location.href.indexOf("isArticle=")){var e="article"==t.mediaType?1:0,n="";n=-1!=location.href.indexOf("?")?location.href+"&isArticle="+e:location.href+"?isArticle="+e,history.replaceState("","",n)}},loadComments:function(){var t=b.notePage,e={contentId:b.noteId,contentTable:"SNF",page:t.page,limit:t.limit,appUserid:b.appUserid};h.getNoteCommentList(e).then(function(e){e.data.page<=1?b.noteComments=e.data.result:b.noteComments=b.noteComments.concat(e.data.result),t.page=e.data.page+1,t.total=e.data.total,t.loading=!1,e.data.page>=e.data.total/e.data.limit&&(t.finished=!0)})},initQuestion:function(t,e){w(),b.questionId=t,t||Object(o["a"])("无效的问答id"),h.getQuestionInfo({noteId:t,userId:b.appUserid}).then(function(t){if(0==t.tag){var n=t.data.result;n.isDelete||n.isHide?e&&e(n):b.questionInfo=n}else e&&e(t)})},initAnswer:function(t,e,n){var i=this;N(),b.answerId=t,b.noteId=t,t||Object(o["a"])("无效的回答id"),h.getAnswerInfo({answerId:t,userId:b.appUserid,is_wv:n?1:0}).then(function(t){if(0==t.tag){var o=t.data.result;o.isDelete||o.isHide?e&&e(o):(o.content=i.removeBr(o.content),b.answerInfo=o,n||i.initQuestion(b.answerInfo.parentId))}else e&&e(t)})},removeBr:function(t){if(!t)return"";var e="<p><br></p >";return t.endsWith(e)?t.substring(0,t.length-e.length):t},likeNote:function(t){if(v.registerTime){t.isLike=1;var e={id:t.id,appUserid:t.appUserid,likeSrc:"H5",userId:v.userId,dataSrc:"H5"};h.setNoteLike(e).then(function(e){0==e.tag&&t.likeCount++})}else i["a"].confirm({confirmButtonText:"立即登录",cancelButtonText:"稍后登录",closeOnClickOverlay:!0,title:"是否立即登录姿美汇？"}).then(function(){Object(c["i"])()})},likeComment:function(t){if(v.registerTime){t.userLike=!0;var e={src:"H5",contentId:t.id,userId:v.userId,referenceUserId:t.referenceUserId};h.setCommentLike(e).then(function(e){0==e.tag&&t.likeCount++})}else i["a"].confirm({confirmButtonText:"立即登录",cancelButtonText:"稍后登录",closeOnClickOverlay:!0,title:"是否立即登录姿美汇？"}).then(function(){Object(c["i"])()})},goCommentFromContent:function(t){var e={id:t.id,replyUserId:t.appUserid,commentUserId:b.appUserid,commentType:0,commentPid:0,appUserid:t.appUserid};I(e),b.comment=Object.assign(b.comment,e),b.commentNickName="说点什么...",this.goComment()},goCommentFromComment:function(t,e){var n={id:t.contentId,replyUserId:t.userId,commentUserId:b.appUserid,commentType:1,commentId:t.id,commentPid:1===e?t.id:t.pid,appUserid:t.referenceUserId};I(n),b.comment=Object.assign(b.comment,n),b.commentNickName='回复"'.concat(t.nickName,'"'),this.goComment()},goComment:function(){v.registerTime?b.replyShow=!0:i["a"].confirm({confirmButtonText:"立即登录",cancelButtonText:"稍后登录",closeOnClickOverlay:!0,title:"是否立即登录姿美汇？"}).then(function(){Object(c["i"])()})},saveComment:function(){var t=this;h.saveComment(b.comment).then(function(e){0==e.tag&&(Object(o["a"])("评论成功"),b.noteInfo.commentCount||b.noteInfo.commentCount++,b.answerInfo.commentCount||b.answerInfo.commentCount++,b.questionInfo.commentCount||b.questionInfo.commentCount++,t.getCommentInfo(e.data.result.commentId))})},getCommentInfo:function(t){h.getCommentInfo({commentId:t}).then(function(t){if(0==t.tag){var e=t.data.result,n=function(t){return e.id===t.id},i=b.noteComments.findIndex(n);if(-1===i)b.noteComments.unshift(e);else{var o=b.noteComments[i].userLike;b.noteComments.splice(i,1,e),b.noteComments[i].userLike=o}}})},getCommentRelayList:function(t){var e=t.childComment.list[t.childComment.limit-1],n={page:1,limit:10,pid:t.id,contentTable:"SNF",id:e.id};h.getCommentRelayList(n).then(function(e){0==e.tag&&(t.childComment.list=t.childComment.list.concat(e.data.result))})}},T={initCircle:function(){Object(c["h"])()&&setTimeout(function(){var t=b.circleInfo,e={imgUrl:t.mainImgUrl,desc:t.communityDesc.substring(0,20)||"发现一个超有意思圈子，快来加入吧！",title:t.communityName,link:window.location.href};Object(c["b"])(e)},1e3)},initTopic:function(){Object(c["h"])()&&setTimeout(function(){var t=b.topicInfo,e={imgUrl:t.mainImgUrl,desc:t.content.substring(0,20)||"发现一个有意思的话题，快来参与讨论吧！",title:"#"+t.topicName+"#",link:window.location.href};Object(c["b"])(e)},1e3)},initNote:function(){Object(c["h"])()&&setTimeout(function(){var t=b.noteInfo,e={imgUrl:t.articleCoverImgUrl||"https://mtmall.meetao.com/img/logo100.png",desc:t.content,title:t.topicName||"快来看看我在姿美汇发现了什么",link:window.location.href};Object(c["b"])(e)},1e3)},initAnswer:function(){Object(c["h"])()&&setTimeout(function(){var t=b.answerInfo,e=t.media&&t.media.length>0?t.media[0].imageUrl:"https://mtmall.meetao.com/img/logo100.png",n={imgUrl:e,desc:t.articleExtractContent,title:b.questionInfo.articleTitle||"快来看看我在姿美汇发现了什么",link:window.location.href};Object(c["b"])(n)},1e3)},initQuestion:function(){Object(c["h"])()&&setTimeout(function(){var t=b.questionInfo,e=t.media&&t.media.length>0?t.media[0].imageUrl:"https://mtmall.meetao.com/img/logo100.png",n={imgUrl:e,desc:t.articleTitle,title:"".concat(t.answerCount,"个回答"),link:window.location.href};Object(c["b"])(n)},1500)}}},"7c66":function(t,e,n){"use strict";var i=n("91ba"),o=n.n(i);o.a},"8e3c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-up"},on:{enter:t.enter}},[n("form",{directives:[{name:"show",rawName:"v-show",value:t.getReplayShow,expression:"getReplayShow"}],staticClass:"comment-form",on:{submit:function(e){return e.preventDefault(),t.saveComment(e)},click:function(t){t.stopPropagation()}}},[n("textarea",{directives:[{name:"drop",rawName:"v-drop"},{name:"model",rawName:"v-model",value:t.comment.comment,expression:"comment.comment"}],ref:"reply",attrs:{rows:"2",type:"text",placeholder:t.replyUser},domProps:{value:t.comment.comment},on:{blur:function(e){return t.onBlur()},input:function(e){e.target.composing||t.$set(t.comment,"comment",e.target.value)}}}),n("button",{staticClass:"publish-comment-btn",style:{opacity:t.comment.comment?1:.4},attrs:{type:"submit"}},[t._v("\n        发送\n      ")])])])},o=[],a=n("3acb"),c={data:function(){return{}},props:{userName:{type:String,default:"回复"}},computed:{replyUser:function(){return a["b"].commentNickName},getReplayShow:function(){return a["b"].replyShow},comment:function(){return a["b"].comment}},mounted:function(){},methods:{enter:function(){this.$refs.reply.focus()},onBlur:function(){},saveComment:function(){var t=this;a["a"].toggelReply(!1),a["a"].saveComment(),window.setTimeout(function(){t.comment.comment=""},500)}}},r=c,m=(n("7c66"),n("2877")),s=Object(m["a"])(r,i,o,!1,null,null,null);e["default"]=s.exports},"91ba":function(t,e,n){},a481:function(t,e,n){"use strict";var i=n("cb7c"),o=n("4bf8"),a=n("9def"),c=n("4588"),r=n("0390"),m=n("5f1b"),s=Math.max,l=Math.min,d=Math.floor,u=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,function(t,e,n,g){return[function(i,o){var a=t(this),c=void 0==i?void 0:i[e];return void 0!==c?c.call(i,a,o):n.call(String(a),i,o)},function(t,e){var o=g(n,t,this,e);if(o.done)return o.value;var d=i(t),u=String(this),p="function"===typeof e;p||(e=String(e));var v=d.global;if(v){var I=d.unicode;d.lastIndex=0}var b=[];while(1){var y=m(d,u);if(null===y)break;if(b.push(y),!v)break;var w=String(y[0]);""===w&&(d.lastIndex=r(u,a(d.lastIndex),I))}for(var N="",C=0,T=0;T<b.length;T++){y=b[T];for(var k=String(y[0]),U=s(l(c(y.index),u.length),0),O=[],j=1;j<y.length;j++)O.push(f(y[j]));var S=y.groups;if(p){var L=[k].concat(O,U,u);void 0!==S&&L.push(S);var H=String(e.apply(void 0,L))}else H=h(k,u,U,O,S,e);U>=C&&(N+=u.slice(C,U)+H,C=U+k.length)}return N+u.slice(C)}];function h(t,e,i,a,c,r){var m=i+t.length,s=a.length,l=p;return void 0!==c&&(c=o(c),l=u),n.call(r,l,function(n,o){var r;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(m);case"<":r=c[o.slice(1,-1)];break;default:var l=+o;if(0===l)return n;if(l>s){var u=d(l/10);return 0===u?n:u<=s?void 0===a[u-1]?o.charAt(1):a[u-1]+o.charAt(1):n}r=a[l-1]}return void 0===r?"":r})}})},aef6:function(t,e,n){"use strict";var i=n("5ca1"),o=n("9def"),a=n("d2c8"),c="endsWith",r=""[c];i(i.P+i.F*n("5147")(c),"String",{endsWith:function(t){var e=a(this,t,c),n=arguments.length>1?arguments[1]:void 0,i=o(e.length),m=void 0===n?i:Math.min(o(n),i),s=String(t);return r?r.call(e,s,m):e.slice(m-s.length,m)===s}})}}]);